version: 2

models:
  - name: int_stock_returns
    description: "Intermediate table calculating returns"

    columns:
      - name: ticker
        tests:
          - not_null

      - name: trading_date
        tests:
          - not_null

      - name: daily_return
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: -1
                max_value: 1

  - name: int_sector_summary
    description: "Aggregates company-level data to sector level."

    columns:
      - name: sector
        tests:
          - not_null

      - name: avg_market_cap
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0

  - name: int_growth_factors
    description: "Revenue and earnings growth computations."

    columns:
      - name: ticker
        tests:
          - not_null

      - name: revenue_growth_yoy
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: -1

      - name: earnings_growth_yoy
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: -1
